var inprogress=new Array();function loadCourses(){if(inprogress.courses==undefined||!inprogress.courses){inprogress.courses=true;DaoLoadCourses(function(a){localStorage.setItem("Courses",JSON.stringify(a));var b=[];a.forEach(function(c){b.push(c.id)});loadAllAssignments(b);a.forEach(function(c){loadDetails(c.id)});inprogress.courses=false})}}function loadDetails(a){if(inprogress["details_"+a]==undefined||!inprogress["details_"+a]){inprogress["details_"+a]=true;DaoLoadDetails(a,function(b){localStorage.setItem("details_"+a,JSON.stringify(b));inprogress["details_"+a]=false})}}function loadAllAssignments(a){if(inprogress.assignments==undefined||!inprogress.assignments){inprogress.assignments=true;DaoLoadAllAssignments(a,function(b){var d={};b.forEach(function(e){if(d[e.courseid]==undefined||d[e.courseid]==null){d[e.courseid]=[]}d[e.courseid].push(e)});for(var c in d){localStorage.setItem("assignments_"+c,JSON.stringify(d[c]));loadGrades(c,d[c])}inprogress.assignments=false})}}function loadGrades(d,b){var a="grades_"+d;if(inprogress[a]==undefined||!inprogress[a]){inprogress[a]=true;var c=[];b.forEach(function(e){c.push(e.name)});DaoLoadGrades(d,c,function(e){e.forEach(function(f){localStorage.setItem("grade_found_"+d+"_"+f.assignmentName,JSON.stringify(f.found));if(f.found){localStorage.setItem("grade_"+d+"_"+f.assignmentName,JSON.stringify(f))}});inprogress[a]=false})}}function loadData(){loadCourses();setTimeout(loadData,10000)};