var storage=false;function DaoInitStorage(){if(typeof(Storage)!=="undefined"){storage=true;loadData()}else{storage=false;notify("Offline storage not supported, cache deactivated")}}function DaoGetCourses(a){if(!storage||localStorage.getItem("Courses")==null){DaoLoadCourses(a)}else{a(JSON.parse(localStorage.getItem("Courses")))}}function DaoGetAssignments(a,b){if(!storage||localStorage.getItem("assignments_"+a)==null){DaoLoadAssigments(a,b)}else{b(JSON.parse(localStorage.getItem("assignments_"+a)))}}function DaoGetAllAssignments(a){DaoGetCourses(function(c){var b=0;var f=[];var e=[];var d=true;c.forEach(function(g){e.push(g.id);var i=g.id;if(!storage||localStorage.getItem("assignments_"+i)==null){d=false}else{var h=JSON.parse(localStorage.getItem("assignments_"+i));h.forEach(function(j){f.push(j)})}});if(d){a(f)}else{DaoLoadAllAssignments(e,a)}})}function DaoGetGrade(a,b,c){if(!storage||localStorage.getItem("grade_found_"+a+"_"+b)==null){DaoLoadGrade(course,b,c)}else{if(JSON.parse(localStorage.getItem("grade_found_"+a+"_"+b))){c(JSON.parse(localStorage.getItem("grade_"+a+"_"+b)),true)}else{c(null,false)}}}function DaoGetGrades(c,d,e){var a=[];var b=true;d.forEach(function(f){if(!storage||localStorage.getItem("grade_found_"+c+"_"+f)==null){b=false}else{if(JSON.parse(localStorage.getItem("grade_found_"+c+"_"+f))){a.push(JSON.parse(localStorage.getItem("grade_"+c+"_"+f)))}else{a.push(new AssignmentGrade(c,f,false,null,null))}}});if(b){e(a)}else{DaoLoadGrades(c,d,e)}}function DaoGetDetails(a,b){if(!storage||localStorage.getItem("details_"+a)==null){DaoLoadDetails(a,b)}else{b(JSON.parse(localStorage.getItem("details_"+a)))}}function DaoLoadCourses(a){getAllCourses(function(b){if(b instanceof Error){notify(b)}else{a(b)}})}function DaoLoadAssigments(a,b){getCourseAssignments([a],function(c){if(c instanceof Error){notify(c)}else{b(c)}})}function DaoLoadAllAssignments(a,b){getCourseAssignments(a,function(c){if(c instanceof Error){notify(c)}else{b(c)}})}function DaoLoadGrade(a,b,c){getCourseAssignmentGrade(a,[b],function(d){if(d instanceof Error){notify(d)}else{if(d.length>0){c(d[0])}else{c(new AssignmentGrade(a,b,false,null,null))}}})}function DaoLoadGrades(a,b,c){getCourseAssignmentGrade(a,b,function(d){if(d instanceof Error){notify(d)}else{b.forEach(function(e){var f=false;d.forEach(function(g){if(g.courseid==a&&g.assignmentName==e){f=true}});if(!f){d.push(new AssignmentGrade(a,e,false,null,null))}});c(d)}})}function DaoLoadDetails(a,b){getCourseDetails(a,function(c){if(c instanceof Error){notify(c)}else{b(c)}})};